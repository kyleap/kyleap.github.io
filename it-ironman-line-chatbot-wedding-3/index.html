<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>用.NET Core 接收Line的訊息事件 (3) | Kyle Studio</title>
<meta name=keywords content="Chatbot">
<meta name=description content="第12 屆iT邦幫忙鐵人賽系列文章 (Day3)
先來看看文件 在 Line 的文件裡有定義 Webhook Event Objects 傳過來的 JSON 的結構
可以看到它會傳一個 events 過來，裡面包含幾個 properties
replyToken : 用來回覆該使用者的Token type：使用者傳送訊息的類型 (message/video/sticker…) mode: Channel是否有效 source:使用者/群組的資訊 … 以上都可以從上方的文件去查看 properties 的用途
將 Line Event Request 轉成 C# Class 在上一篇我們 Web Api 是用 dynamic 來接收 Request，在VS有個功能是很快的把 JSON 結構轉成 C# 的 Class，這個技巧在串接異質 Api 蠻常用的，或者是可以用 json2csharp.com 這種服務來處理。
複製官方的JSON Sample，在 VS 點選編輯 => 選擇性貼上 => 貼上 JSON
結果會長這樣，通常我不會在一個 .cs 放多個類別，但為了文章好呈現故直接貼上來，拆一拆檔案的工也還好
做點加工，把 Event 的 Type 一些文件改成 C# 的 Enum，讓開發更順暢，新增一個 WebhookEventType.">
<meta name=author content="Kyle">
<link rel=canonical href=https://kyleap.github.io/it-ironman-line-chatbot-wedding-3/>
<meta name=google-site-verification content="XYZabc">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.5e2b4101351c21e906f398ae96901791830f58d430f96f2659dab7eaef7b3cb7.css integrity="sha256-XitBATUcIekG85iulpAXkYMPWNQw+W8mWdq36u97PLc=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://kyleap.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://kyleap.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://kyleap.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://kyleap.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://kyleap.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.88.1">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DPE6YM5E5N"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-DPE6YM5E5N',{anonymize_ip:!1})}</script>
<meta property="og:title" content="用.NET Core 接收Line的訊息事件 (3)">
<meta property="og:description" content="第12 屆iT邦幫忙鐵人賽系列文章 (Day3)
先來看看文件 在 Line 的文件裡有定義 Webhook Event Objects 傳過來的 JSON 的結構
可以看到它會傳一個 events 過來，裡面包含幾個 properties
replyToken : 用來回覆該使用者的Token type：使用者傳送訊息的類型 (message/video/sticker…) mode: Channel是否有效 source:使用者/群組的資訊 … 以上都可以從上方的文件去查看 properties 的用途
將 Line Event Request 轉成 C# Class 在上一篇我們 Web Api 是用 dynamic 來接收 Request，在VS有個功能是很快的把 JSON 結構轉成 C# 的 Class，這個技巧在串接異質 Api 蠻常用的，或者是可以用 json2csharp.com 這種服務來處理。
複製官方的JSON Sample，在 VS 點選編輯 => 選擇性貼上 => 貼上 JSON
結果會長這樣，通常我不會在一個 .cs 放多個類別，但為了文章好呈現故直接貼上來，拆一拆檔案的工也還好
做點加工，把 Event 的 Type 一些文件改成 C# 的 Enum，讓開發更順暢，新增一個 WebhookEventType.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://kyleap.github.io/it-ironman-line-chatbot-wedding-3/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2020-11-03T07:53:01+00:00">
<meta property="article:modified_time" content="2020-11-03T07:53:01+00:00"><meta property="og:site_name" content="Kyle Studio">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="用.NET Core 接收Line的訊息事件 (3)">
<meta name=twitter:description content="第12 屆iT邦幫忙鐵人賽系列文章 (Day3)
先來看看文件 在 Line 的文件裡有定義 Webhook Event Objects 傳過來的 JSON 的結構
可以看到它會傳一個 events 過來，裡面包含幾個 properties
replyToken : 用來回覆該使用者的Token type：使用者傳送訊息的類型 (message/video/sticker…) mode: Channel是否有效 source:使用者/群組的資訊 … 以上都可以從上方的文件去查看 properties 的用途
將 Line Event Request 轉成 C# Class 在上一篇我們 Web Api 是用 dynamic 來接收 Request，在VS有個功能是很快的把 JSON 結構轉成 C# 的 Class，這個技巧在串接異質 Api 蠻常用的，或者是可以用 json2csharp.com 這種服務來處理。
複製官方的JSON Sample，在 VS 點選編輯 => 選擇性貼上 => 貼上 JSON
結果會長這樣，通常我不會在一個 .cs 放多個類別，但為了文章好呈現故直接貼上來，拆一拆檔案的工也還好
做點加工，把 Event 的 Type 一些文件改成 C# 的 Enum，讓開發更順暢，新增一個 WebhookEventType.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://kyleap.github.io/posts/"},{"@type":"ListItem","position":2,"name":"用.NET Core 接收Line的訊息事件 (3)","item":"https://kyleap.github.io/it-ironman-line-chatbot-wedding-3/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"用.NET Core 接收Line的訊息事件 (3)","name":"用.NET Core 接收Line的訊息事件 (3)","description":"第12 屆iT邦幫忙鐵人賽系列文章 (Day3)\n先來看看文件 在 Line 的文件裡有定義 Webhook Event Objects 傳過來的 JSON 的結構\n可以看到它會傳一個 events 過來，裡面包含幾個 properties\nreplyToken : 用來回覆該使用者的Token type：使用者傳送訊息的類型 (message/video/sticker…) mode: Channel是否有效 source:使用者/群組的資訊 … 以上都可以從上方的文件去查看 properties 的用途\n將 Line Event Request 轉成 C# Class 在上一篇我們 Web Api 是用 dynamic 來接收 Request，在VS有個功能是很快的把 JSON 結構轉成 C# 的 Class，這個技巧在串接異質 Api 蠻常用的，或者是可以用 json2csharp.com 這種服務來處理。\n複製官方的JSON Sample，在 VS 點選編輯 =\u0026gt; 選擇性貼上 =\u0026gt; 貼上 JSON\n結果會長這樣，通常我不會在一個 .cs 放多個類別，但為了文章好呈現故直接貼上來，拆一拆檔案的工也還好\n做點加工，把 Event 的 Type 一些文件改成 C# 的 Enum，讓開發更順暢，新增一個 WebhookEventType.","keywords":["Chatbot"],"articleBody":"第12 屆iT邦幫忙鐵人賽系列文章 (Day3)\n先來看看文件 在 Line 的文件裡有定義 Webhook Event Objects 傳過來的 JSON 的結構\n可以看到它會傳一個 events 過來，裡面包含幾個 properties\nreplyToken : 用來回覆該使用者的Token type：使用者傳送訊息的類型 (message/video/sticker…) mode: Channel是否有效 source:使用者/群組的資訊 … 以上都可以從上方的文件去查看 properties 的用途\n將 Line Event Request 轉成 C# Class 在上一篇我們 Web Api 是用 dynamic 來接收 Request，在VS有個功能是很快的把 JSON 結構轉成 C# 的 Class，這個技巧在串接異質 Api 蠻常用的，或者是可以用 json2csharp.com 這種服務來處理。\n複製官方的JSON Sample，在 VS 點選編輯 = 選擇性貼上 = 貼上 JSON\n結果會長這樣，通常我不會在一個 .cs 放多個類別，但為了文章好呈現故直接貼上來，拆一拆檔案的工也還好\n做點加工，把 Event 的 Type 一些文件改成 C# 的 Enum，讓開發更順暢，新增一個 WebhookEventType.cs\npublic enum WebhookEventType { Message, Follow, Unfollow, } Event class 就會改為如下\npublic class Event { public WebhookEventType type { get; set; } public string replyToken { get; set; } public WebhookEventSource source { get; set; } public long timestamp { get; set; } public string mode { get; set; } public LineMessage message { get; set; } } 再做一次，我們將訊息的類型也定義 LineMessageType.cs\npublic enum LineMessageType { text, sticker, image, video, audio, template, flex, location } Message Class 就會改為如下\npublic class Message { public string id { get; set; } public string type { get; set; } public LineMessageType text { get; set; } } 試著從Line Develop Console後台，將 Chatbot 加入好友後，發送第一個訊息，並將 Controller 的 Api 的參數改成剛剛建立的 WebhookEvent Class，可以開始用強型別開發了\n針對不同事件，做不同流程 讓 Controller 不要那麼複雜，我們新增一個 LineBotApp.cs，定義一個 RunAsync來處理各種事件\n 有型別的好處就是在switch(e.type)按下 VS 就會自動展開所有 Enums\n 針對不同事件，加入實作的 function，我們用 virtual 保留未來繼承這個 LineBotApp.cs 可以 override 的彈性\nOnMessageAsync 可以再針對使用者所傳的類型處理\n其他 Events 上面實作了 Message/Follow/UnFollow的Event，還有其他事件，為求簡單，故等我們有必要用到的時候再來實做它吧\nUnsend event：當使用者收回訊息的時候 Join event：當 Bot加入群組的時候 Leave event：當 Bot離開群組的時候 Member join event：當有新成員加入群組的時候 Member leave event：當有新成員離開群組的時候 Postback event：當使用者有點選Bot設計的流程按鈕的事件 (這應該會蠻常用) Video viewing complete event：影片看完時候的 Beacon event：觸發Beacon的時候 Account link event：當使用者Line帳號跟Bot連接時 (通常用於異質系統與Line Bot連結) Device link event：裝置連結 ( IoT相關，Line Things API) Device unlink event：裝置取消連結 ( IoT相關，Line Things API)\n懶人包，本次學到了什麼?  理解 Line Webhook 所定義的 Event 類型 Line Webhook Event Objects 學會看文件，從官方JSON Sample 轉成 C# 的 Class (by VS or https://json2csharp.com/) C# Enum 的用法 Enumeration types (C# reference) C# 裡的 virual class [C#] 利用 interface(介面) abstract(抽象) override(覆寫) inherit(繼承) 實作簡單範例  ","wordCount":"291","inLanguage":"en","datePublished":"2020-11-03T07:53:01Z","dateModified":"2020-11-03T07:53:01Z","author":{"@type":"Person","name":"Kyle"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://kyleap.github.io/it-ironman-line-chatbot-wedding-3/"},"publisher":{"@type":"Organization","name":"Kyle Studio","logo":{"@type":"ImageObject","url":"https://kyleap.github.io/favicon.ico"}}}</script>
</head>
<body class=dark id=top>
<script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://kyleap.github.io/ accesskey=h title="Kyle Studio (Alt + H)">Kyle Studio</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://kyleap.github.io/kyleshen/ title=about>
<span>about</span>
</a>
</li>
<li>
<a href=https://kyleap.github.io/archives/ title=archives>
<span>archives</span>
</a>
</li>
<li>
<a href=https://kyleap.github.io/categories/ title=categories>
<span>categories</span>
</a>
</li>
<li>
<a href=https://kyleap.github.io/tags/ title=tags>
<span>tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://kyleap.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://kyleap.github.io/posts/>Posts</a></div>
<h1 class=post-title>
用.NET Core 接收Line的訊息事件 (3)
</h1>
<div class=post-meta>2020-11-03&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Kyle
</div>
</header>
<div class=post-content><p>第12 屆iT邦幫忙鐵人賽系列文章 (Day3)</p>
<h1 id=先來看看文件>先來看看文件<a hidden class=anchor aria-hidden=true href=#先來看看文件>#</a></h1>
<p>在 Line 的文件裡有定義 <a href=https://developers.line.biz/en/reference/messaging-api/#webhook-event-objects>Webhook Event Objects</a> 傳過來的 JSON 的結構</p>
<p><img loading=lazy src=https://cdn-images-1.medium.com/max/2000/1*4ko6T_Kxg30uNsW7dYKvsA.png alt>
</p>
<p>可以看到它會傳一個 events 過來，裡面包含幾個 properties</p>
<p>replyToken : 用來回覆該使用者的Token
type：使用者傳送訊息的類型 (message/video/sticker…)
mode: Channel是否有效
source:使用者/群組的資訊
…
以上都可以從上方的文件去查看 properties 的用途</p>
<h1 id=將-line-event-request-轉成-c-class>將 Line Event Request 轉成 C# Class<a hidden class=anchor aria-hidden=true href=#將-line-event-request-轉成-c-class>#</a></h1>
<p>在上一篇我們 Web Api 是用 dynamic 來接收 Request，在VS有個功能是很快的把 JSON 結構轉成 C# 的 Class，這個技巧在串接異質 Api 蠻常用的，或者是可以用 <a href=https://json2csharp.com/>json2csharp.com</a> 這種服務來處理。</p>
<p>複製官方的JSON Sample，在 VS 點選編輯 => 選擇性貼上 => 貼上 JSON</p>
<p><img loading=lazy src=https://cdn-images-1.medium.com/max/2000/1*JkwkHzbx3-zhToy6NSohlA.png alt>
</p>
<p>結果會長這樣，通常我不會在一個 .cs 放多個類別，但為了文章好呈現故直接貼上來，拆一拆檔案的工也還好</p>
<p><img loading=lazy src=https://cdn-images-1.medium.com/max/2000/1*yXPcGsW3HIPRlwrkDRM1kQ.png alt>
</p>
<p>做點加工，把 Event 的 Type 一些文件改成 C# 的 Enum，讓開發更順暢，新增一個 WebhookEventType.cs</p>
<pre tabindex=0><code>public enum WebhookEventType
{
    Message,
    Follow,
    Unfollow,
}
</code></pre><p>Event class 就會改為如下</p>
<pre tabindex=0><code>public class Event
{
    public WebhookEventType type { get; set; }
    public string replyToken { get; set; }
    public WebhookEventSource source { get; set; }
    public long timestamp { get; set; }
    public string mode { get; set; }
    public LineMessage message { get; set; }
}
</code></pre><p>再做一次，我們將訊息的類型也定義 LineMessageType.cs</p>
<pre tabindex=0><code>public enum LineMessageType
{
    text,
    sticker,
    image,
    video,
    audio,
    template,
    flex,
    location
}
</code></pre><p>Message Class 就會改為如下</p>
<pre tabindex=0><code>public class Message
{
    public string id { get; set; }
    public string type { get; set; }
    public LineMessageType text { get; set; }
}
</code></pre><p>試著從Line Develop Console後台，將 Chatbot 加入好友後，發送第一個訊息，並將 Controller 的 Api 的參數改成剛剛建立的 WebhookEvent Class，可以開始用強型別開發了</p>
<p><img loading=lazy src=https://cdn-images-1.medium.com/max/2000/1*8VQynNPK4zAHT8EfCgWTsA.png alt>
</p>
<h1 id=針對不同事件做不同流程>針對不同事件，做不同流程<a hidden class=anchor aria-hidden=true href=#針對不同事件做不同流程>#</a></h1>
<p>讓 Controller 不要那麼複雜，我們新增一個 LineBotApp.cs，定義一個 RunAsync來處理各種事件</p>
<blockquote>
<p>有型別的好處就是在switch(e.type)按下 VS 就會自動展開所有 Enums</p>
</blockquote>
<p><img loading=lazy src=https://cdn-images-1.medium.com/max/2000/1*ABP4RznvY6GJed9nBAx-kA.png alt>
</p>
<p>針對不同事件，加入實作的 function，我們用 virtual 保留未來繼承這個 LineBotApp.cs 可以 override 的彈性</p>
<p><img loading=lazy src=https://cdn-images-1.medium.com/max/2000/1*BfuSPELXEcNn17AcvL3qPg.png alt>
</p>
<p>OnMessageAsync 可以再針對使用者所傳的類型處理</p>
<p><img loading=lazy src=https://cdn-images-1.medium.com/max/2000/1*zEEUqCngEdqTcemFpvPhIA.png alt>
</p>
<h1 id=其他-events>其他 Events<a hidden class=anchor aria-hidden=true href=#其他-events>#</a></h1>
<p>上面實作了 Message/Follow/UnFollow的Event，還有其他事件，為求簡單，故等我們有必要用到的時候再來實做它吧</p>
<p><a href=https://developers.line.biz/en/reference/messaging-api/#unsend-event>Unsend event</a>：當使用者收回訊息的時候
<a href=https://developers.line.biz/en/reference/messaging-api/#join-event>Join event</a>：當 Bot加入群組的時候
<a href=https://developers.line.biz/en/reference/messaging-api/#leave-event>Leave event</a>：當 Bot離開群組的時候
<a href=https://developers.line.biz/en/reference/messaging-api/#member-joined-event>Member join event</a>：當有新成員加入群組的時候
<a href=https://developers.line.biz/en/reference/messaging-api/#member-left-event>Member leave event</a>：當有新成員離開群組的時候
<a href=https://developers.line.biz/en/reference/messaging-api/#postback-event>Postback event</a>：當使用者有點選Bot設計的流程按鈕的事件 (這應該會蠻常用)
<a href=https://developers.line.biz/en/reference/messaging-api/#video-viewing-complete>Video viewing complete event</a>：影片看完時候的
<a href=https://developers.line.biz/en/reference/messaging-api/#beacon-event>Beacon event</a>：觸發Beacon的時候
<a href=https://developers.line.biz/en/reference/messaging-api/#account-link-event>Account link event</a>：當使用者Line帳號跟Bot連接時 (通常用於異質系統與Line Bot連結)
<a href=https://developers.line.biz/en/reference/messaging-api/#device-link-event>Device link event</a>：裝置連結 ( IoT相關，Line Things API)
<a href=https://developers.line.biz/en/reference/messaging-api/#device-unlink-event>Device unlink event</a>：裝置取消連結 ( IoT相關，Line Things API)</p>
<h1 id=懶人包本次學到了什麼>懶人包，本次學到了什麼?<a hidden class=anchor aria-hidden=true href=#懶人包本次學到了什麼>#</a></h1>
<ul>
<li>理解 Line Webhook 所定義的 Event 類型
<a href=https://developers.line.biz/en/reference/messaging-api/#webhook-event-objects>Line Webhook Event Objects</a></li>
<li>學會看文件，從官方JSON Sample 轉成 C# 的 Class (by VS or <a href=https://json2csharp.com/>https://json2csharp.com/</a>)</li>
<li>C# Enum 的用法
<a href=https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/enum>Enumeration types (C# reference)</a></li>
<li>C# 裡的 virual class
<a href=https://exfast.me/2016/09/c-sharp-use-interface-abstract-override-inheritance-implements-a-simple-example/>[C#] 利用 interface(介面) abstract(抽象) override(覆寫) inherit(繼承) 實作簡單範例</a></li>
</ul>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://kyleap.github.io/tags/chatbot/>Chatbot</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://kyleap.github.io/it-ironman-line-chatbot-wedding-4/>
<span class=title>« Prev Page</span>
<br>
<span>回覆第一個Line的訊息-歡迎詞 (4)</span>
</a>
<a class=next href=https://kyleap.github.io/it-ironman-line-chatbot-wedding-2/>
<span class=title>Next Page »</span>
<br>
<span>用.NET Core接收第一個Line訊息 (2)</span>
</a>
</nav>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://kyleap.github.io/>Kyle Studio</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>